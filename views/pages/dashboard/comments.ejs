<%- include('../partials/header.ejs') %>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.css">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-2">
                <%- include('../partials/sidebar.ejs') %>
            </div>
            <div class="col-md-8">
                <div class="row">
                    <div class="col-md-8 offset-md-2">
                        <div class="card card-body my-3 p-3">
                            <h4>
                                My Recent Comments
                            </h4>
                            <div class="mt-5" id="comment-holder">

                                <% if(comments.length===0){ %>
                                    <p class="text-center text-muted">There is No Comment</p>
                                    <% }else { %>
                                        <% for( let comment of comments.reverse() ) { %>

                                            <div class="media border p-2 mb-2">

                                                <img class="mr-3 img-fluid" src="<%=comment.user.profilePics %> "
                                                    style="width: 40px; border-radius: 20px">
                                                <div class="media-body ">
                                                    <p class="text-muted">
                                                        On Post <strong>
                                                            <%= comment.post.title %> By
                                                                <a href="/author/<%= comment.user._id %> ">
                                                                    <%= comment.user.username %>
                                                                </a>
                                                                <%= moment(comment.createdAt) %>
                                                        </strong>
                                                    </p>
                                                    <%= comment.body %>

                                                        <div class="media mt-3"
                                                            style="display: flex; flex-direction: column">
                                                            <% if (comment.replies.length> 0) { %>
                                                                <% for( let rep of comment.replies ) { %>
                                                                    <div class="d-flex m-1">
                                                                        <img class="mr-3"
                                                                            style="width: 40px; border-radius: 20px"
                                                                            src="<%= rep.user.profilePics %> ">


                                                                        <div class="media-body">
                                                                            <p>
                                                                                <%= rep.body %>
                                                                            </p>
                                                                        </div>
                                                                    </div>
                                                                    <% } %>
                                                                        <% } %>


                                                        </div>
                                                        <div class="m-3">
                                                            <input type="text" class="form-control"
                                                                placeholder="Press Enter to  Reply " name="reply"
                                                                data-comment="<%= comment._id %> ">
                                                        </div>

                                                </div>
                                            </div>

                                            <% } %>
                                                <% } %>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>


    <%- include('../partials/footer.ejs') %>
        <!-- <script src="/scripts/singlePage.js"></script> -->
        <script src="/scripts/comment.js"></script>

        </body>


        </html>
